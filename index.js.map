{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTemplate = imgInfo => {\n  return `\n  <li class=\"gallery-card\">\n  <a class=\"gallery-link\" href=\"${imgInfo.largeImageURL}\">\n    <img class=\"gallery-card\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" />\n    <div class=\"card-info\">\n      <p class=\"info-item\">\n        <b>Likes</b> ${imgInfo.likes}\n      </p>\n      <p class=\"info-item\">\n        <b>Views</b> ${imgInfo.views}\n      </p>\n      <p class=\"info-item\">\n        <b>Comments</b> ${imgInfo.comments}\n      </p>\n      <p class=\"info-item\">\n        <b>Downloads</b> ${imgInfo.downloads}\n      </p>\n    </div>\n  </a>\n</li>\n`;\n};\n","import axios from 'axios';\n\nlet currentPage = 1;\nlet lastSearchedValue = '';\n\nexport const fetchFotos = async searchedValue => {\n  if (searchedValue !== lastSearchedValue) {\n    currentPage = 1;\n    lastSearchedValue = searchedValue;\n  }\n\n  try {\n    const response = await axios.get(`https://pixabay.com/api/`, {\n      params: {\n        key: '45483609-d3ae590ff20ddbd4abc31de80',\n        q: searchedValue,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: currentPage,\n        per_page: 15,\n      },\n    });\n\n    currentPage += 1;\n\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching fotos:', error);\n    throw error;\n  }\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { createGalleryCardTemplate } from './js/render-functions';\nimport { fetchFotos } from './js/pixabay-api';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loadMoreButtonEl = document.querySelector('.js-load-more');\nconst loader = document.querySelector('.loader');\nlet searchedValue = '';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n\nconst toggleLoadMoreButton = hits => {\n  if (hits.length < 15) {\n    loadMoreButtonEl.style.display = 'none';\n  } else {\n    loadMoreButtonEl.style.display = 'block';\n  }\n};\n\nconst onSearchFormSubmit = event => {\n  event.preventDefault();\n  searchedValue = searchFormEl.elements.user_query.value.trim();\n\n  if (searchedValue === '') {\n    iziToast.warning({\n      title: 'Warning',\n      position: 'topRight',\n      message: 'Please enter a search query.',\n    });\n    return;\n  }\n\n  loader.style.display = 'inline-block';\n  loadMoreButtonEl.style.display = 'none';\n\n  fetchFotos(searchedValue)\n    .then(data => {\n      if (data.hits.length === 0) {\n        iziToast.warning({\n          title: 'Warning',\n          position: 'topRight',\n          message: 'No images found. Please try a different search query.',\n        });\n        return;\n      }\n\n      const galleryCardTemplate = data.hits\n        .map(img => createGalleryCardTemplate(img))\n        .join('');\n      galleryEl.innerHTML = galleryCardTemplate;\n\n      lightbox.refresh();\n      toggleLoadMoreButton(data.hits); \n\n      searchFormEl.reset();\n    })\n    .catch(err => {\n      console.log(err);\n      iziToast.error({\n        title: 'Error',\n        position: 'topRight',\n        message: 'An error occurred while uploading images. Please try again.',\n      });\n    })\n    .finally(() => {\n      loader.style.display = 'none';\n    });\n};\n\nconst onLoadMoreClick = () => {\n  loader.style.display = 'inline-block';\n\n  fetchFotos(searchedValue)\n    .then(data => {\n      if (data.hits.length > 0) {\n        const galleryCardTemplate = data.hits\n          .map(img => createGalleryCardTemplate(img))\n          .join('');\n        galleryEl.insertAdjacentHTML('beforeend', galleryCardTemplate);\n\n        lightbox.refresh();\n\n        const cardHeight =\n          galleryEl.lastElementChild.getBoundingClientRect().height;\n        window.scrollBy({\n          top: cardHeight * 2,\n          behavior: 'smooth',\n        });\n\n        toggleLoadMoreButton(data.hits); \n      } else {\n        iziToast.info({\n          title: 'Info',\n          position: 'topRight',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n        loadMoreButtonEl.style.display = 'none'; \n      }\n    })\n    .catch(err => {\n      console.log(err);\n      iziToast.error({\n        title: 'Error',\n        position: 'topRight',\n        message: 'An error occurred while uploading images. Please try again.',\n      });\n    })\n    .finally(() => {\n      loader.style.display = 'none';\n    });\n};\n\nloadMoreButtonEl.addEventListener('click', onLoadMoreClick);\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);"],"names":["createGalleryCardTemplate","imgInfo","currentPage","lastSearchedValue","fetchFotos","searchedValue","response","axios","error","searchFormEl","galleryEl","loadMoreButtonEl","loader","lightbox","SimpleLightbox","toggleLoadMoreButton","hits","onSearchFormSubmit","event","iziToast","data","galleryCardTemplate","img","err","onLoadMoreClick","cardHeight"],"mappings":"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"}